<!doctype html>
<html lang="ja">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Theremin Cache Reset</title>
<style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;padding:16px;}</style>
</head>
<body>
<p>キャッシュをリセットしています…</p>
<script>
(async function(){
  try {
    if('serviceWorker' in navigator) {
      const regs = await navigator.serviceWorker.getRegistrations();
      await Promise.all(regs.map(r=>r.unregister()));
    }
    if(window.caches) {
      const keys = await caches.keys();
      await Promise.all(keys.map(k=>caches.delete(k)));
    }
  } catch(e) {}
  const u = new URL(location.href);
  const healed = u.searchParams.get('healed') || '';
  location.replace('./?v=3537' + (healed ? '&healed=1' : ''));
})();
</script>
</body>
</html>
